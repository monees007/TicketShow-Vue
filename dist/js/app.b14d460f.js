(function(){"use strict";var t={490:function(t,e,a){a.d(e,{Z:function(){return H}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("NavBar",{attrs:{"data-bs-theme":t.appstore.app_theme}}),e("Sidebar",{attrs:{appstore:t.appstore}}),e("ReviewModal"),t.appstore.is_logged_in?e("MTab",{staticClass:"d-none d-md-flex"}):t._e(),"admin"===t.appstore.user.role?e("NewShowModal"):t._e(),"admin"===t.appstore.user.role?e("FloatingActionButton"):t._e(),e("router-view",{staticStyle:{padding:"30px"}}),t.appstore.is_logged_in?t._e():e("div",{staticStyle:{"color-scheme":"light !important"},attrs:{id:"g_id_onload","data-auto_select":"true","data-callback":"handleCredentialResponse","data-client_id":"519706053397-1739mh8juqvrs4tv89mer3dvdjoshl01.apps.googleusercontent.com","data-context":"signin","data-itp_support":"true","data-ux_mode":"popup"}})],1)},o=[],i=(a(2801),function(){var t=this,e=t._self._c;return e("div",{staticClass:"NavBar"},[e("b-modal",{attrs:{id:"modal-lg","data-bs-theme":t.appstore.app_theme,"cancel-only":"",size:"md",static:"",title:"Search"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[e("div",{staticClass:"col"},[e("h3",[t._v(" Search ")])]),e("b-icon",{attrs:{icon:"x-lg"},on:{click:function(e){t.search_not_toggled=!t.search_not_toggled}}})]},proxy:!0},{key:"modal-footer",fn:function(){return[e("div",{})]},proxy:!0}]),model:{value:t.search_not_toggled,callback:function(e){t.search_not_toggled=e},expression:"search_not_toggled"}},[e("b-input",{staticClass:"text-right border-0",attrs:{id:"searchy","data-bs-theme":t.appstore.app_theme,autocomplete:"off",placeholder:"supports regex"},on:{keyup:t.do_search},model:{value:t.search_string,callback:function(e){t.search_string=e},expression:"search_string"}}),e("hr",{}),t._l(t.result,(function(a,s){return e("b-row",{key:s,staticClass:"py-2",on:{click:function(e){return t.openpage(a)}}},[e("b-col",{staticClass:"align-items-start"},[e("h3",{},[t._v(t._s(a.name))]),e("span",{staticClass:"disabled"},[t._v(t._s(a.place||a.director))]),e("hr")])],1)}))],2),e("b-navbar",{staticClass:"text-primary fixed-top",staticStyle:{"justify-content":"space-between !important"}},[e("b-navbar-nav",[e("b-navbar-brand",{attrs:{href:"/"}},[e("img",{staticClass:"d-inline-block mx-3",staticStyle:{height:"37px"},attrs:{src:"https://cdn4.iconfinder.com/data/icons/flat-design-development-set-3/24/color-wheel-512.png"}}),e("span",{staticClass:"font-monospace bg- text-light d-none d-sm-inline-flex",staticStyle:{"font-size":"large","font-weight":"bold"}},[t._v("TicketShow")])]),e("b-col",[e("span",{staticClass:"font-monospace d-none align-bottom d-md-block",staticStyle:{"font-size":"smaller"}},[t._v(t._s(t.appstore.user.email)+" "),"admin"===t.appstore.user.role?e("b-icon",{attrs:{icon:"shield-fill-check"}}):t._e()],1)])],1),e("div",{staticClass:"d-inline-flex align-items-center"},[e("b-dropdown",{staticClass:"m-2",attrs:{"data-bs-theme":t.appstore.app_theme,id:"dropdown-right",right:"",text:t.appstore.city}},[e("b-dropdown-item",{on:{click:function(e){return t.appstore.setCity("New Delhi")}}},[t._v("New Delhi")]),e("b-dropdown-item",{on:{click:function(e){return t.appstore.setCity("Bangalore")}}},[t._v("Bangalore")])],1),e("b-button",{staticClass:"mx-3 d-sm-inline-block",attrs:{pill:""},on:{click:function(e){t.search_not_toggled=!t.search_not_toggled}}},[e("font-awesome-icon",{attrs:{icon:["fas","magnifying-glass"],size:"lg"}})],1),e("b-button",{staticClass:"mx-2",attrs:{pill:""},on:{click:t.appstore.toggle_theme}},[e("b-icon",{attrs:{icon:"dark"===t.appstore.app_theme?"moon-stars-fill":"sun-fill","aria-hidden":"true"}})],1),e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-1",modifiers:{"sidebar-1":!0}}],staticClass:"mx-2 d-md-none",attrs:{pill:"",variant:""}},[e("font-awesome-icon",{attrs:{icon:["fas","bars"]}})],1),e("b-avatar",{directives:[{name:"b-hover",rawName:"v-b-hover",value:e=>{t.info=e},expression:"(hover)=>{info=hover}"}],staticClass:"d-flex justify-content-center align-items-center mx-3 bg-secondary border-0",staticStyle:{height:"50px",width:"50px"},attrs:{"data-bs-theme":t.appstore.app_theme,href:t.appstore.is_logged_in?"":"#/login"}},[e("b-avatar",{directives:[{name:"b-hover",rawName:"v-b-hover",value:e=>{t.info=e},expression:"(hover)=>{info=hover}"}],staticClass:"mx-3",staticStyle:{"font-weight":"bolder","font-size":"x-large"},attrs:{src:t.appstore.user.profile_pic}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.info&&t.appstore.is_logged_in,expression:"info && appstore.is_logged_in"},{name:"b-hover",rawName:"v-b-hover",value:e=>{t.info=e},expression:"(hover)=>{info=hover}"}],staticClass:"px-3 py-3",staticStyle:{position:"absolute",right:"0px",top:"0px",height:"200px",width:"300px"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.info&&t.appstore.is_logged_in,expression:"info && appstore.is_logged_in"},{name:"b-hover",rawName:"v-b-hover",value:e=>{t.info=e},expression:"(hover)=>{info=hover}"}],staticClass:"card px-5 py-3",staticStyle:{position:"absolute",right:"50px",top:"50px","text-align":"left"}},[e("h5",[e("strong",[t._v(" "+t._s(t.appstore.user.name)+" ")])]),e("span",{staticClass:"disabled small text-danger-emphasis"},[t._v(" "+t._s(t.appstore.user.role)+" ")]),e("p",[t._v(t._s(t.appstore.user.email))]),e("b-button",{on:{click:function(e){return t.appstore.logout()}}},[t._v("Logout")])],1)])],1)],1)],1)}),r=[],n=(a(7658),a(3306)),l={name:"NavBar",computed:{App(){return H}},data:()=>({info:"",appstore:(0,n.q)(),search_not_toggled:!1,search_string:"",result:[]}),methods:{toggle_search(){this.search_not_toggled=!this.search_not_toggled},async do_search(){try{const t=await fetch(this.appstore.api+"/search?search_type=0&search_string="+this.search_string,{method:"GET"});if(200===t.status){let e=await t.json();this.result=e}else console.log(t.status,"Failed at TheatreList")}catch(t){console.log("Failed at TheatreList",t)}},openpage(t){this.appstore.router.push((t.director?"/show/":"/theatre/")+t.id),this.search_not_toggled=!this.search_not_toggled,this.search_string="",this.result=[]}}},c=l,d=a(1001),p=(0,d.Z)(c,i,r,!1,null,"fed19000",null),u=p.exports,h=function(){var t=this,e=t._self._c;return e("b-modal",{staticClass:"modal-fullscreen-sm-down",attrs:{id:"modal-xl","data-bs-theme":t.appstore.app_theme,size:"xl"},scopedSlots:t._u([{key:"modal-header",fn:function({hide:a}){return[e("b",{staticClass:"h3 mx-3"},[t._v("Create")]),e("div",{staticClass:"pa-2 mx-4",on:{click:a}},[e("b-icon",{attrs:{icon:"x-lg"}})],1)]}},{key:"modal-footer",fn:function({cancel:a,hide:s}){return[e("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return a()}}},[t._v("Hide")]),e("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){0===t.displaymode?t.postTheatre(s):t.postShow(s)}}},[t._v("Save")])]}}])},[e("b-button-group",{staticClass:"col mb-3",attrs:{cols:"3"}},[e("b-button",{attrs:{pressed:0===t.displaymode},on:{click:function(e){t.displaymode=0}}},[t._v("New Theatre")]),e("b-button",{attrs:{pressed:1===t.displaymode},on:{click:function(e){t.displaymode=1}}},[t._v("New Show")])],1),e("b-button-group",{staticClass:"col mb-3 mx-2",attrs:{cols:"3"}},[e("b-button",{attrs:{pressed:t.show_preview},on:{"update:pressed":function(e){t.show_preview=e}}},[t._v(t._s(t.show_preview?"Hide Image Preview":"Show Image Preview"))])],1),0===t.displaymode?e("div",[e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-namet"}},[t._v("Name")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-input",{attrs:{id:"input-namet"},model:{value:t.theatre.name,callback:function(e){t.$set(t.theatre,"name",e)},expression:"theatre.name"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-place"}},[t._v("Place")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-input",{attrs:{id:"input-place"},model:{value:t.theatre.place,callback:function(e){t.$set(t.theatre,"place",e)},expression:"theatre.place"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-city"}},[t._v("City")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-input",{attrs:{id:"input-city"},model:{value:t.theatre.city,callback:function(e){t.$set(t.theatre,"city",e)},expression:"theatre.city"}})],1)],1)],1):t._e(),1===t.displaymode?e("div",{staticClass:"d-md-flex flex-row align-items-start"},[e("b-form",{staticClass:"col mx-md-4",attrs:{validated:t.state_show}},[e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-name-s"}},[t._v("Name")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-name-s",required:""},model:{value:t.show.name,callback:function(e){t.$set(t.show,"name",e)},expression:"show.name"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-year"}},[t._v("Year")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-year",required:"",type:"number"},model:{value:t.show.year,callback:function(e){t.$set(t.show,"year",e)},expression:"show.year"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-director"}},[t._v("Director")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-director",required:""},model:{value:t.show.director,callback:function(e){t.$set(t.show,"director",e)},expression:"show.director"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-description"}},[t._v("Description")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-description",required:""},model:{value:t.show.description,callback:function(e){t.$set(t.show,"description",e)},expression:"show.description"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-duration"}},[t._v("Duration")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-duration",required:""},model:{value:t.show.duration,callback:function(e){t.$set(t.show,"duration",e)},expression:"show.duration"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-poster"}},[t._v("Poster")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-poster",required:""},model:{value:t.show.image_url,callback:function(e){t.$set(t.show,"image_url",e)},expression:"show.image_url"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-thumbnail"}},[t._v("Thumbnail")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-thumbnail",required:""},model:{value:t.show.image_sqr,callback:function(e){t.$set(t.show,"image_sqr",e)},expression:"show.image_sqr"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-tags"}},[t._v("Tags")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-tags",required:""},model:{value:t.show.tags,callback:function(e){t.$set(t.show,"tags",e)},expression:"show.tags"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-ticket_price"}},[t._v("Ticket Price")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-ticket_price",required:""},model:{value:t.show.ticket_price,callback:function(e){t.$set(t.show,"ticket_price",e)},expression:"show.ticket_price"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-format"}},[t._v("Format")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{id:"input-format",required:""},model:{value:t.show.format,callback:function(e){t.$set(t.show,"format",e)},expression:"show.format"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"4"}},[e("label",{attrs:{for:"input-language"}},[t._v("Language")])]),e("b-col",{attrs:{sm:"7"}},[e("b-form-input",{attrs:{list:"my-list-id",required:""},model:{value:t.show.language,callback:function(e){t.$set(t.show,"language",e)},expression:"show.language"}}),e("datalist",{attrs:{id:"my-list-id"}},[e("option",[t._v("English")]),e("option",[t._v("Hindi")]),e("option",[t._v("Tamil")]),e("option",[t._v("Kannada")])])],1)],1)],1),e("b-img",{directives:[{name:"show",rawName:"v-show",value:t.show_preview,expression:"show_preview"}],staticClass:"ml-2 imgr",staticStyle:{"max-width":"30%"},attrs:{src:t.show.image_sqr,"fluid-grow":"",thumbnail:""}}),e("b-img",{directives:[{name:"show",rawName:"v-show",value:t.show_preview,expression:"show_preview"}],staticClass:"imgr",staticStyle:{"min-height":"400px !important"},attrs:{src:t.show.image_url,"fluid-grow":"",thumbnail:""}})],1):t._e()],1)},m=[],b=a(306),f={name:"NewShowModal",data:()=>({appstore:(0,n.q)(),show_preview:!1,displaymode:1,state_show:!1,state_theatre:!1,theatre:{name:"",place:"",city:""},show:{name:"",image_url:"",image_sqr:"",tags:"",ticket_price:"",format:"",language:"",year:"",director:"",description:"",duration:""}}),methods:{async postShow(t){if(this.state_show=!0,""===this.show.name||""===this.show.image_url||""===this.show.image_sqr||""===this.show.tags||""===this.show.ticket_price||""===this.show.format||""===this.show.language||""===this.show.year||""===this.show.director||""===this.show.description||""===this.show.duration)return;const e=this;await b.Z.post(this.appstore.api+"/shows",this.show,{headers:this.appstore.getheader()}).then((function(a){200===a.status?(e.show.name="",e.show.image_url="",e.show.image_sqr="",e.show.tags="",e.show.ticket_price="",e.show.format="",e.show.language="",e.show.year="",e.show.director="",e.show.description="",e.show.duration="",t()):(console.log(a),e.error=!0)})).catch((function(t){console.log(t),e.error=!0}))},async postTheatre(t){if(this.state_theatre=!0,""===this.theatre.name||""===this.theatre.place||""===this.theatre.city)return;const e=this;await b.Z.post(this.appstore.api+"/theatre",this.theatre,{headers:this.appstore.getheader()}).then((function(a){200===a.status?(e.theatre.name="",e.theatre.place="",e.theatre.city="",t()):(console.log(a),e.error=!0)})).catch((function(t){console.log(t),e.error=!0}))}}},g=f,_=(0,d.Z)(g,h,m,!1,null,null,null),v=_.exports,w=function(){var t=this,e=t._self._c;return e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-xl",modifiers:{"modal-xl":!0}}],staticClass:"d-flex z-3 btn-secondary align-items-center justify-content-center position-fixed",attrs:{variant:"outline","data-bs-theme":t.appstore.app_theme,id:"fab1"}},[e("b-icon",{attrs:{icon:"plus-lg"}})],1)},y=[],k={name:"FloatingActionButton",data(){return{appstore:(0,n.q)()}}},x=k,C=(0,d.Z)(x,w,y,!1,null,null,null),S=C.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex position-fixed align-items-center justify-content-evenly",staticStyle:{"flex-direction":"column",height:"95vh",left:"3px",width:"50px"},attrs:{id:"parent1"}},[e("router-link",{staticClass:"rotate",attrs:{to:"/"}},[t._v("HOME")]),e("router-link",{staticClass:"rotate",attrs:{to:"/bookings"}},[t._v("BOOKINGS")]),"admin"===t.appstore.user.role?e("router-link",{staticClass:"rotate",attrs:{to:"/dashboard"}},[t._v("DASHBOARD")]):t._e(),"admin"===t.appstore.user.role?e("router-link",{staticClass:"rotate",attrs:{to:"/stats"}},[t._v("STATS")]):t._e()],1)},N=[],E={name:"MTab",data:()=>({appstore:(0,n.q)()})},P=E,q=(0,d.Z)(P,T,N,!1,null,null,null),D=q.exports,X=function(){var t=this,e=t._self._c;return e("b-sidebar",{staticClass:"opacity-100",staticStyle:{opacity:"1!important"},attrs:{id:"sidebar-1","bg-variant":"primary","data-bs-theme":"mellow",right:"",shadow:"","text-variant":"light",title:"TicketShow"},scopedSlots:t._u([{key:"header",fn:function({hide:a}){return[e("div",{staticClass:"my-3 d-flex justify-content-between w-100"},[e("b-button",{staticClass:"bg-transparent mx-3",on:{click:a}},[e("font-awesome-icon",{attrs:{icon:["fas","xmark"],size:"xl"}})],1),e("h1",[t._v(t._s(t.appstore.user.name||"TicketShow"))])],1)]}}])},[e("div",{staticClass:"px-3 py-2"},[e("b-row",{staticClass:"align-items-center"},[e("b-avatar",{staticClass:"d-flex justify-content-center align-items-center mx-3 bg-secondary",staticStyle:{height:"50px",width:"50px"},attrs:{"data-bs-theme":t.appstore.app_theme,href:t.appstore.is_logged_in?"#/user":"#/login"}},[e("b-avatar",{staticStyle:{"font-weight":"bolder","font-size":"x-large"},attrs:{src:t.appstore.user.profile_pic}})],1),e("span",{staticStyle:{"font-size":"large"}},[t._v(t._s(t.appstore.user.email))]),e("span",{staticStyle:{"font-size":"smaller"}},[t._v(t._s(t.appstore.user.role))])],1),e("b-list-group",{staticClass:"my-4 border-0 bg-transparent"},[e("b-list-group-item",{staticClass:"border-0 bg-transparent"},[e("router-link",{staticClass:"rotate",attrs:{to:"/"}},[t._v("HOME")])],1),e("b-list-group-item",{staticClass:"border-0 bg-transparent"},[e("router-link",{staticClass:"rotate",attrs:{to:"/bookings"}},[t._v("BOOKINGS")])],1),"admin"===t.appstore.user.role?e("b-list-group-item",{staticClass:"border-0 bg-transparent"},[e("router-link",{staticClass:"rotate",attrs:{to:"/dashboard"}},[t._v("DASHBOARD")])],1):t._e(),"admin"===t.appstore.user.role?e("b-list-group-item",{staticClass:"border-0 bg-transparent"},[e("router-link",{staticClass:"rotate",attrs:{to:"/stats"}},[t._v("STATS")])],1):t._e()],1),e("b-button",{staticClass:"my-1",on:{click:function(e){return t.appstore.logout()}}},[t._v(" Logout")])],1)])},A=[],j={name:"Sidebar",data(){return{appstore:(0,n.q)()}}},B=j,M=(0,d.Z)(B,X,A,!1,null,null,null),O=M.exports,$=function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{attrs:{"data-bs-theme":t.appstore.app_theme,title:"Create Review"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[e("span",{staticClass:"h4"},[t._v("Create Review")]),e("b-icon",{attrs:{icon:"x-lg"},on:{click:function(e){t.appstore.review_modal.show=!1}}})]},proxy:!0},{key:"modal-footer",fn:function(){return[e("b-button",{on:{click:t.post}},[t._v("Save Review")])]},proxy:!0}]),model:{value:t.appstore.review_modal.show,callback:function(e){t.$set(t.appstore.review_modal,"show",e)},expression:"appstore.review_modal.show"}},[this.error?e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("Something went wrong. Please try again.")]):t._e(),e("b-rating",{staticClass:"ml-5 my-2 border-0",attrs:{variant:t.check||t.rating>0?"warning":"danger",inline:"",size:"lg"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),e("b-form-invalid-feedback",{attrs:{state:t.check||t.rating>0}},[t._v(" Please select at least 1 star and give a review to continue. ")]),e("b-form-textarea",{attrs:{id:"textarea",state:t.review.length>=10||null,"max-rows":"6",placeholder:"Enter something...",rows:"3"},model:{value:t.review,callback:function(e){t.review=e},expression:"review"}}),e("b-form-invalid-feedback",{attrs:{state:t.review.length>=10||0===t.review.length&&t.check}},[t._v(" Atleast 10 characters required. ")])],1)],1)},L=[],R={name:"ReviewModal",data(){return{check:!0,appstore:(0,n.q)(),rating:0,review:"",error:!1}},methods:{async post(){const t=this;0===this.rating||0===this.review.length?this.check=this.review.length>0&&this.rating>0:await b.Z.post(this.appstore.api+"/review",{show_id:this.appstore.review_modal.show_id,theatre_id:this.appstore.review_modal.theatre_id,rating:this.rating,review:this.review},{headers:this.appstore.getheader()}).then((function(e){200===e.status&&(console.log(e),t.appstore.reload_reviews(),t.appstore.hide_review_modal())})).catch((function(e){console.log(e),t.error=!0}))}}},Z=R,U=(0,d.Z)(Z,$,L,!1,null,null,null),z=U.exports;function F(t){let e=t.split(".")[1],a=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(a).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(s)}window.handleCredentialResponse=async t=>{console.log(t.credential);const e=F(t.credential);await b.Z.post("http://127.0.0.1:4433/login/google",{token:t.credential},{headers:{"Content-Type":"application/json",accept:"application/json"}}).then((function(t){(0,n.q)().login_with_token(t.data.token,e)})).catch((function(t){console.log(t)}))};var I={name:"App",components:{ReviewModal:z,Sidebar:O,MTab:D,FloatingActionButton:S,NewShowModal:v,NavBar:u},data:()=>({show:!0,appstore:(0,n.q)()}),created(){this.appstore.check_for_token(),this.appstore.toggle_theme()},beforeMount(){document.body.style.background="dark"===this.appstore.app_theme?"#000":"#fff"}},V=I,G=(0,d.Z)(V,s,o,!1,null,null,null),H=G.exports},708:function(t,e,a){a.d(e,{Z:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"movie_card",class:"dark"===t.appstore.app_theme?"bg-black":"bg-light-subtle",attrs:{id:"ave","data-bs-theme":t.appstore.app_theme}},[e("div",{staticClass:"info_section d-flex flex-column"},[e("div",{staticClass:"movie_header",on:{click:function(e){return t.pushr(t.m.id)}}},[e("b-img-lazy",{staticClass:"locandina",attrs:{src:t.m.image_url},on:{click:function(e){return t.pushr(t.m.id)}}}),e("div",{staticClass:"d-flex flex-column align-items-start"},[e("h1",{staticStyle:{"text-wrap":"nowrap",overflow:"hidden"}},[t._v(t._s(t.m.name))]),e("h4",[t._v(t._s(t.m.year)+", "+t._s(t.m.director))]),e("div",[e("span",{staticClass:"minutes"},[t._v(t._s(t.m.format))]),e("p",{staticClass:"type text-wrap"},[t._v(t._s(t.m.tags))])])])],1),e("div",{staticClass:"align-items-start mx-sm-4 d-flex flex-column text_el align-items-start align-items-sm-center mt-sm-5 px-2",on:{click:function(e){return t.pushr(t.m.id)}}},[e("p",{staticClass:"text"},[t._v(" "+t._s(t.m.description)+" ")])]),e("div",{staticClass:"d-flex flex-row mb-3 mx-2"},[e("b-rating",{staticClass:"rating-el bg-transparent",attrs:{value:t.m.rating,disabled:"",inline:"","no-border":"",size:"lg",variant:""}}),t.buttons?e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-booking",modifiers:{"modal-booking":!0}}],staticClass:"mx-2 btn-outline-secondary btn-dark",attrs:{"data-bs-theme":t.appstore.app_theme,pill:""},on:{click:function(e){return t.storeX.setValue(t.t,t.m)}}},[t._v("Book ")]):t._e(),t.buttons?e("b-button",{attrs:{pill:""},on:{click:function(e){return t.pushr(t.m.id)}}},[t._v("Review")]):t._e()],1)]),e("div",{staticClass:"blur_back bright_back",staticStyle:{"max-width":"fit-content"},on:{click:function(e){return t.pushr(t.m.id)}}},[e("b-img-lazy",{staticStyle:{"max-height":"-webkit-fill-available"},attrs:{src:t.m.image_sqr},on:{click:function(e){return t.pushr(t.m.id)}}})],1)])},o=[],i=(a(7658),a(1650)),r=a(3306),n={name:"MovieCard",data:()=>({storeX:(0,i.M)(),appstore:(0,r.q)()}),props:["m","t","buttons"],methods:{pushr(t){this.appstore.router.currentRoute.path!=="/show/"+t&&this.appstore.router.push("/show/"+t)}}},l=n,c=a(1001),d=(0,c.Z)(l,s,o,!1,null,null,null),p=d.exports},7963:function(t,e,a){var s=a(7195),o=a(490),i=a(7781),r=a(7244),n=(a(7024),a(2751)),l=a(4337);(0,l.z)("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var c=a(8659),d=a(4340),p=a(4984),u=a(1967),h=a(5021),m=a(2185),b=a.n(m);s["default"].use(b()),s["default"].component("apexchart",b()),s["default"].use(c.og);const f=(0,c.WB)();d.vI.add(u.NCV,h.mRB),s["default"].component("font-awesome-icon",p.GN),s["default"].use(i.XG7),s["default"].use(r.A7),s["default"].config.productionTip=!0,new s["default"]({router:n.Z,pinia:f,render:t=>t(o.Z)}).$mount("#app")},2751:function(t,e,a){a.d(e,{Z:function(){return mt}});var s=a(7195),o=a(2241),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[t.appstore.is_logged_in?t._e():e("b-alert",{staticClass:"fixed-bottom d-flex justify-content-between shadow",attrs:{show:"",variant:"warning"}},[t._v("You are not logged in. "),e("b-button",{attrs:{href:"#/login",variant:"warning"}},[t._v("Click here to login")])],1),t.appstore.server_error?e("b-alert",{staticClass:"d-flex justify-content-between",attrs:{show:"",variant:"danger"}},[t._v("Server not found ")]):t._e(),e("CarouselM",{staticClass:"d-none"}),e("TheaterList",{ref:"theatre_list"})],1)},r=[],n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mx-3 my-3 rounded-5"},[e("b-carousel",{ref:"myCarousel",staticStyle:{"text-shadow":"0 0 2px #000","border-radius":"60px !important",overflow:"hidden"},attrs:{id:"carousel-fade",fade:"",controls:"","img-height":"280","img-width":"1024"}},[e("b-carousel-slide",{attrs:{caption:"First Slide","img-src":"https://picsum.photos/1024/480/?image=10"}}),e("b-carousel-slide",{attrs:{caption:"Second Slide","img-src":"https://picsum.photos/1024/480/?image=12"}}),e("b-carousel-slide",{attrs:{caption:"Third Slide","img-src":"https://picsum.photos/1024/480/?image=22"}})],1)],1)},l=[],c=(0,s.defineComponent)({name:"CarouselM",data(){return{controller_show:!1,slide:0}},methods:{prev(){this.$refs.myCarousel.prev()},next(){this.$refs.myCarousel.next()}},mounted(){this.controller_show=!0}}),d=c,p=a(1001),u=(0,p.Z)(d,n,l,!1,null,"cea33c82",null),h=u.exports,m=a(3306),b=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{},[t.loading?e("div",{staticClass:"bg-secondary rounded-5 py-3 px-1 mb-5 background1",attrs:{"data-bs-theme":t.appstore.app_theme}},[e("div",{staticClass:"d-flex flex-column align-items-start px-5 pt-4"},[e("b-skeleton",{staticClass:"h1",attrs:{height:"50px",width:"400px"}}),e("div",{staticClass:"d-flex justify-content-start w-auto"},[e("b-skeleton",{attrs:{height:"25px",width:"150px"}}),e("b-skeleton",{attrs:{height:"25px",width:"150px"}})],1),e("div",{staticClass:"w-100 d-flex flex-column align-items-center my-5"},[e("b-skeleton",{staticClass:"position-relative my-5",attrs:{if:t.loading,height:"350px",width:"800px"}}),e("b-skeleton",{staticClass:"position-relative my-5",attrs:{if:t.loading,height:"350px",width:"800px"}})],1)],1)]):t._e(),t._l(t.appstore.theatre_list.theatre,(function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:a[1].length>0,expression:"t[1].length> 0"}],key:a[0].id,staticClass:"bg-secondary rounded-5 py-3 px-1 mb-5 background1",attrs:{"data-bs-theme":t.appstore.app_theme}},[e("div",{staticClass:"d-flex flex-column align-items-start px-5 pt-4"},[e("h1",{staticClass:"align-items-start",staticStyle:{"font-size":"xx-large"}},[t._v(" "+t._s(a[0].name)+" ")]),e("div",{staticClass:"d-flex justify-content-start w-auto"},[e("span",{staticClass:"disabled w-auto"},[t._v(t._s(a[0].place))]),e("b-form-rating",{staticClass:"bg-black border-0 mx-3 flex-row",staticStyle:{"max-width":"125px"},attrs:{"data-bs-theme":t.appstore.app_theme,color:"golden",readonly:""},model:{value:a[0].rating,callback:function(e){t.$set(a[0],"rating",e)},expression:"t[0].rating"}})],1)]),t._l(a[1],(function(t){return e("MovieCard",{key:t.id,attrs:{buttons:!0,m:t,t:a[0]}})}))],2)})),t.appstore.server_error?t._e():e("BookingModal",{attrs:{show:t.storeX.show,theatre:t.storeX.theatre}})],2)},f=[],g=a(708),_=a(1650),v=function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{staticClass:"d-flex flex-column",attrs:{id:"modal-booking","data-bs-theme":t.appstore.app_theme,"no-stacking":"",size:"lg"},on:{show:this.storeX.load_running},scopedSlots:t._u([{key:"modal-header",fn:function(){return[e("span",{staticClass:"h4"},[t._v("Book Tickets")]),e("b-icon",{attrs:{icon:"x-lg"},on:{click:function(e){t.storeX.showModal1=!1}}})]},proxy:!0},{key:"modal-footer",fn:function({}){return[e("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(e){return t.storeX.$reset()}}},[t._v(" "+t._s("Cancel")+" ")]),e("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){t.booking_successful?t.storeX.showModal1=!1:t.bookticket()}}},[t._v(" "+t._s(t.booking_successful?"Done":"Confirm Booking")+" ")])]}}]),model:{value:t.storeX.showModal1,callback:function(e){t.$set(t.storeX,"showModal1",e)},expression:"storeX.showModal1"}},[e("b-alert",{directives:[{name:"show",rawName:"v-show",value:t.booking_successful,expression:"booking_successful"}],attrs:{show:"",variant:"success"}},[t._v("Booking Successful")]),e("b-alert",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],attrs:{show:"",variant:"danger"}},[t._v(" Please check all fields")]),e("b-row",[e("span",{staticClass:"left"},[t._v("Show")]),e("b-col",{staticClass:"right"},[e("h3",[t._v(" "+t._s(t.show.name))]),e("span",{staticClass:"pillx"},[t._v(t._s(t.show.format))]),e("span",{staticClass:"pillx"},[t._v(t._s(t.lang||"ENG"))])])],1),e("b-row",{staticClass:"mt-3"},[e("span",{staticClass:"left"},[t._v("Theatre")]),e("b-col",{staticClass:"right"},[e("h4",{staticStyle:{"max-width":"fit-content"}},[t._v(t._s(t.theatre.name)+" ")]),e("h5",{staticStyle:{"max-width":"fit-content"}},[t._v(t._s(t.theatre.place)+" ")])])],1),e("b-row",{staticClass:"mt-3"},[e("span",{staticClass:"left"},[t._v("Date")]),e("b-col",{staticClass:"right d-inline"},[e("b-datepicker",{staticClass:"my-2 bg-dark",class:"dark"===t.appstore.app_theme?"bg-primary":"",attrs:{id:"datepicker","data-bs-theme":t.appstore.app_theme,min:new Date,"selected-variant":"secondary",required:""},model:{value:t.booking.date,callback:function(e){t.$set(t.booking,"date",e)},expression:"booking.date"}})],1)],1),e("b-row",{attrs:{cols:"mt-3"}},[e("span",{staticClass:"left"},[t._v("Slot")]),e("b-col",{staticClass:"right"},[t.storeX.loading?e("div",[t._v(" Loading Slots "),e("b-icon",{staticClass:"mt-3",attrs:{animation:"spin","font-scale":"2",icon:"arrow-clockwise"}})],1):t._e(),e("b-form-select",{staticClass:"my-2 input-field bg-primary",attrs:{state:t.is_valid,required:""},on:{change:function(e){t.booking.rid=t.selected_run.id},input:function(e){t.booking.total_price=t.total_p}},model:{value:t.selected_run,callback:function(e){t.selected_run=e},expression:"selected_run"}},[e("b-form-select-option",{attrs:{value:null,default:"",disabled:""}},[t._v("Please select the show")]),t._l(t.storeX.running,(function(a){return e("b-form-select-option",{key:a.id,attrs:{value:a}},[t._v(t._s("Starting at "+t.formatTimeTo12Hour(a.start))+" ")])}))],2)],1)],1),e("b-row",{staticClass:"mt-3"},[e("span",{staticClass:"left"},[t._v("Seats")]),e("b-col",{staticClass:"right"},[t._l(t.storeX.selectedSeats.split(",").splice(1),(function(a){return e("span",{key:a,staticClass:"pillx"},[t._v(t._s(a))])})),e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-multi-2",modifiers:{"modal-multi-2":!0}}],attrs:{disabled:!t.selected_run.ticket_price}},[t._v("Select Seats")]),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.selected_run.ticket_price,expression:"!selected_run.ticket_price"}],staticClass:"text-warning"},[t._v(" Please select a slot first")])],2)],1),e("b-row",[e("span",{staticClass:"left"},[t._v("Person")]),e("b-col",{staticClass:"right my-3"},[e("b-form-input",{attrs:{min:"1",readonly:"",required:"",type:"number"},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}})],1)],1),e("b-row",[e("span",{staticClass:"left"},[t._v("Price")]),e("b-col",{staticClass:"right my-3",attrs:{"data-bs-theme":t.appstore.app_theme}},[e("b-input-group",[e("div",{staticClass:"input-group-prepend"},[e("div",{staticClass:"input-group-text bg-transparent border-end-0 rounded-end-0"},[t._v("₹")])]),e("b-form-input",{staticClass:"border-start-0",attrs:{readonly:"",type:"number"},model:{value:t.total_p,callback:function(e){t.total_p=e},expression:"total_p"}})],1)],1)],1)],1),e("b-modal",{attrs:{id:"modal-multi-2","data-bs-theme":t.appstore.app_theme,"ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function({cancel:a}){return[e("span",{staticClass:"h4"},[t._v("Select seats")]),e("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-booking",modifiers:{"modal-booking":!0}}],attrs:{icon:"x-lg"},on:{click:a}})]}},{key:"modal-footer",fn:function({cancel:a}){return[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-booking",modifiers:{"modal-booking":!0}}],attrs:{size:"md",variant:"success"},on:{click:function(t){return a()}}},[t._v(" "+t._s("Done")+" ")])]}}]),model:{value:t.storeX.showModal2,callback:function(e){t.$set(t.storeX,"showModal2",e)},expression:"storeX.showModal2"}},[e("div",{staticClass:"movie-container"},[e("ul",{staticClass:"showcase"},[e("li",[e("div",{staticClass:"seat"}),e("small",[t._v("Available")])]),e("li",[e("div",{staticClass:"seat selected"}),e("small",[t._v("Selected")])]),e("li",[e("div",{staticClass:"seat occupied"}),e("small",[t._v("Occupied")])])]),e("div",{staticClass:"container"},[e("div",{staticClass:"screen"},[t._v("Screen this side.")]),t._l(t.alphas,(function(a){return e("div",{key:a,staticClass:"row"},t._l(8,(function(s){return e("div",{key:s,class:["seat",t.selected_run.occupied_seats.includes(""+a+s)?"occupied":"",t.storeX.selectedSeats.includes(""+a+s)?"selected":""],attrs:{id:a+s},on:{click:t.seatclick}},[t._v(t._s(a+s)+" ")])})),0)})),e("p",{staticClass:"mt-3"},t._l(t.storeX.selectedSeats.split(",").splice(1),(function(a){return e("span",{key:a,staticClass:"pillx"},[t._v(t._s(a))])})),0)],2)])])],1)},w=[],y={name:"BookingModal",props:["show","theatre"],data:()=>({is_valid:!0,selected_run:{ticket_price:0,occupied_seats:""},booking:{total_price:0,person:1,date:null},storeX:(0,_.M)(),appstore:(0,m.q)(),lang:"",booking_successful:!1,error:!1}),computed:{alphas:()=>["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].slice(0,8),total_p(){return this.person*this.selected_run.ticket_price},person(){return this.storeX.selectedSeats.split(",").splice(1).length}},methods:{seatclick(t){t.target.classList.contains("seat")&&!t.target.classList.contains("occupied")&&(t.target.classList.contains("selected")?this.storeX.updateSeats(this.storeX.selectedSeats.replace(","+t.target.id,"")):this.storeX.updateSeats(this.storeX.selectedSeats+","+t.target.id),t.target.classList.toggle("selected"))},formatTimeTo12Hour(t){const[e,a,s]=t.split(":");let o="AM",i=parseInt(e,10);return i>=12?(o="PM",i>12&&(i-=12)):0===i&&(i=12),`${i}:${a} ${o}`},async bookticket(){if(this.total_p<1||!this.booking.date)this.error=!0;else{this.error=!1;const t=await fetch(this.appstore.api+"/booking",{method:"POST",headers:this.appstore.getheader(),body:JSON.stringify({running_id:this.selected_run.id,theatre_name:this.storeX.theatre.name,theatre_place:this.storeX.theatre.place,show_name:this.selected_run.show_name,language:this.selected_run.language,format:this.selected_run.format,person:this.person,date:this.booking.date,start:this.selected_run.start,end:this.selected_run.end,seats:this.storeX.selectedSeats,total_price:this.total_p})});await t.status;const e=await fetch(this.appstore.api+"/running",{method:"PATCH",headers:this.appstore.getheader(),body:JSON.stringify({id:this.selected_run.id,occupied_seats:this.selected_run.occupied_seats+this.storeX.selectedSeats})});await e.status,this.booking_successful=!0,setTimeout((()=>{this.storeX.$reset()}),3e3)}}}},k=y,x=(0,p.Z)(k,v,w,!1,null,null,null),C=x.exports,S=(0,s.defineComponent)({name:"TheaterList",components:{MovieCard:g.Z,BookingModal:C},data:()=>({appstore:(0,m.q)(),storeX:(0,_.M)(),loading:!0,loadingTime:0,maxLoadingTime:3}),beforeMount(){this.loading=!0,this.appstore.load_homepage().then((()=>{this.loading=this.appstore.server_error}))}}),T=S,N=(0,p.Z)(T,b,f,!1,null,"889b2fd6",null),E=N.exports,P={name:"HomeView",components:{TheaterList:E,CarouselM:h},data:()=>({appstore:(0,m.q)()})},q=P,D=(0,p.Z)(q,i,r,!1,null,null,null),X=D.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"DashBoardView",staticStyle:{"min-width":"46vh"},attrs:{"data-bs-theme":t.appstore.app_theme}},[t.appstore.is_logged_in?t._e():e("b-alert",{staticClass:"fixed-top d-flex justify-content-between",attrs:{show:"",variant:"warning"}},[t._v("You are not logged in. "),e("b-button",{attrs:{href:"#/login",variant:"warning"}},[t._v("Click here to login")])],1),t.appstore.server_error?e("b-alert",{staticClass:"d-flex justify-content-between",attrs:{dismissible:"",show:"",variant:"danger"}},[t._v(" Server not found ")]):t._e(),e("b-button-group",{staticClass:"col mb-3 w-100",staticStyle:{"max-width":"988px"}},[e("b-button",{staticClass:"py-3",attrs:{pressed:0===t.activeTab},on:{click:function(e){t.activeTab=0}}},[t._v("Shows")]),e("b-button",{staticClass:"py-3",attrs:{pressed:1===t.activeTab},on:{click:function(e){t.activeTab=1}}},[t._v("Theatres")])],1),e("div",{staticClass:"d-flex"},[e("b-button-group",{staticClass:"col mb-3",class:t.searching?"hide":"show"},[1===t.activeTab?e("b-button",{staticStyle:{"max-width":"max-content"},attrs:{pressed:1===t.displaymode},on:{click:function(e){t.displaymode=1}}},[e("font-awesome-icon",{staticClass:"me-2",attrs:{icon:["fas","film"]}}),t._v(" Edit Shows ")],1):t._e(),1===t.activeTab?e("b-button",{staticStyle:{"max-width":"max-content"},attrs:{pressed:0===t.displaymode},on:{click:function(e){t.displaymode=0}}},[e("font-awesome-icon",{staticClass:"me-1",attrs:{icon:["fas","tent"]}}),t._v(" Edit Theatre Details ")],1):t._e()],1),e("div",{staticClass:"d-inline-flex align-items-center border-1 rounded-5 mb-3 bg-primary px-3",class:t.searching?"show":"",staticStyle:{height:"35px","max-width":"400px"}},[e("font-awesome-icon",{attrs:{icon:["fas","magnifying-glass"]},on:{click:function(e){t.searching=!0}}}),e("b-input",{staticClass:"border-0 bg-transparent",class:t.searching?"":"hide",attrs:{id:"search-filter",placeholder:"Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],attrs:{icon:["fas","xmark"]},on:{click:function(e){t.searching=!1,t.filter=""}}})],1)],1),0===t.activeTab?e("ShowsTableEditor",{staticClass:"d-flex",attrs:{displaymode:t.displaymode,filter:t.filter}}):t._e(),1===t.activeTab?e("TheatresTableEditor",{staticClass:"d-flex",attrs:{id:"tte",displaymode:t.displaymode,filter:t.filter}}):t._e()],1)},j=[],B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column"},[e("b-modal",{attrs:{id:"modelpreview","data-bs-theme":t.appstore.app_theme,title:"Image Preview"},scopedSlots:t._u([{key:"modal-header",fn:function({hide:a}){return[e("span",{staticClass:"h4"},[t._v("Image Preview")]),e("b-icon",{attrs:{icon:"x-lg"},on:{click:a}})]}},{key:"modal-footer",fn:function(){},proxy:!0}])},[e("b-img",{staticClass:"d-block w-100 h-100",attrs:{src:t.image,alt:"Fluid image",fluid:""}})],1),e("Transition",[e("b-card",[e("b-editable-table",{staticClass:"editable-table table-hover border-0",class:"dark"===t.appstore.app_theme?"bg-primary":"bg-light-subtle",attrs:{busy:t.loading,"current-page":t.currentPage,"per-page":"5","data-bs-theme":t.appstore.app_theme,editMode:"row",fields:t.fields,filter:t.filter,"head-variant":"dark"===t.appstore.app_theme?"dark":"secondary","key-field":"id",rowUpdate:t.rowUpdate,disableDefaultEdit:"",hover:"",responsive:"","sort-icon-left":"",stacked:"sm"},scopedSlots:t._u([{key:"cell(edit)",fn:function(a){return[a.isEdit?e("div",{attrs:{"data-bs-theme":t.appstore.app_theme}},[e("b-button",{staticClass:"mx-2 edit-button",attrs:{pill:""},on:{click:function(e){return t.handleSubmit(a,!1)}}},[e("font-awesome-icon",{attrs:{icon:["fas","xmark"]}})],1),e("b-button",{staticClass:"edit-button",attrs:{pill:""},on:{click:function(e){return t.handleSubmit(a,!0)}}},[e("font-awesome-icon",{attrs:{icon:["fas","check"]}})],1)],1):e("div",[a.isEdit?t._e():e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2",attrs:{pill:"",title:"Edit Row"},on:{click:function(e){return t.handleEdit(a)}}},[e("font-awesome-icon",{attrs:{icon:["fas","pen-to-square"]}})],1),a.isEdit?t._e():e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{pill:"",title:"Delete Row"},on:{click:function(e){return t.handleDelete(a)}}},[e("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2 d-sm-none",attrs:{pill:"",title:"Reload"},on:{click:t.update_records}},[e("font-awesome-icon",{attrs:{icon:["fas","rotate-right"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-sm-none",attrs:{title:t.synced?"Synced with server":"Unsaved Changes. Save to continue",variant:t.synced?"secondary":"warning",pill:""},on:{click:function(e){return t.handleSave()}}},[e("font-awesome-icon",{attrs:{icon:["fas","floppy-disk"]}})],1)],1)]}},{key:"cell(ticket_price)",fn:function(a){return[e("span",[t._v("₹"+t._s(a.value))])]}},{key:"cell(duration)",fn:function(a){return[e("span",[t._v(t._s(a.value)+" min")])]}},{key:"cell(image_url)",fn:function(a){return[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modelpreview",modifiers:{modelpreview:!0}}],on:{click:function(e){t.image=a.value}}},[e("b-icon",{attrs:{icon:"image"}})],1),e("span",{staticClass:"my-2 mx-1"},[t._v(t._s(a.value))])]}},{key:"cell(image_sqr)",fn:function(a){return[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modelpreview",modifiers:{modelpreview:!0}}],on:{click:function(e){t.image=a.value}}},[e("b-icon",{attrs:{icon:"image"}})],1),e("span",{staticClass:"my-2 mx-1"},[t._v(t._s(a.value))])]}},{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),e("strong",[t._v("Loading...")])],1)]},proxy:!0}]),model:{value:t.storeX.$state.show_list,callback:function(e){t.$set(t.storeX.$state,"show_list",e)},expression:"storeX.$state.show_list"}}),e("b-button-toolbar",{attrs:{"data-bs-theme":t.appstore.app_theme,"key-nav":""}},[e("b-pagination",{staticClass:"my-0 bg-primary text-primary mx-3 mb-3",attrs:{id:"pagination","data-bs-theme":t.appstore.app_theme,"total-rows":t.storeX.$state.show_list.length,align:"fill","per-page":"5",size:"md"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),e("b-button-group",{staticClass:"mx-1 mb-3",attrs:{"key-nav":""}},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"me-2",attrs:{pill:"",title:"Add Row",variant:"secondary"},on:{click:function(e){return t.handleAdd()}}},[e("font-awesome-icon",{attrs:{icon:["fas","diagram-next"],rotation:"180"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"me-2",attrs:{pill:"",title:"Reload"},on:{click:t.update_records}},[e("font-awesome-icon",{attrs:{icon:["fas","rotate-right"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"me-2",attrs:{title:t.synced?"Synced with server":"Unsaved Changes. Save to continue",variant:t.synced?"secondary":"warning",pill:""},on:{click:function(e){return t.handleSave()}}},[e("font-awesome-icon",{attrs:{icon:["fas","floppy-disk"]}})],1)],1),e("b-button-group",{staticClass:"mx-1 mb-3"},[e("DownloadCSV",{attrs:{obj:"shows"}})],1)],1)],1)],1)],1)},M=[],O=(a(2062),a(2792)),$=a(6297),L=a(6151),R=function(){var t=this,e=t._self._c;return e("b-button",{staticClass:"rounded-5",on:{click:function(e){"SUCCESS"===t.status?t.downloadfile():t.startTask()}}},[t._v(t._s("PENDING"===t.status?"Generating...":"FAILED"===t.status?"Generate CSV":"SUCCESS"===t.status?"Download CSV":"Generate CSV")+" ")])},Z=[],U={name:"DownloadCSV",data:()=>({appstore:(0,m.q)(),status:"",task_id:""}),props:["obj"],methods:{startTask(){fetch(this.appstore.api+"/export?obj="+this.obj,{method:"GET",headers:this.appstore.getheader()}).then((t=>t.json())).then((t=>{console.log("Task started with ID:",t.task_id),this.status="PENDING",this.task_id=t.task_id,this.checkTaskStatus()})).catch((t=>{console.error("Error starting task:",t)}))},checkTaskStatus(){const t=new EventSource(this.appstore.api+`/export/status?task_id=${this.task_id}`);t.onmessage=e=>{const a=e.data;console.log(a),"PENDING"!==a&&(console.log("not pending"),"FAILED"===a?(this.status="FAILED",t.close()):(this.status="SUCCESS",this.downloadfile(),console.log(a),t.close()))},t.onerror=e=>{console.error("SSE error:",e),t.close()}},downloadfile(){fetch(this.appstore.api+`/export/download?task_id=${this.task_id}`).then((t=>{t.ok?t.blob().then((t=>{const e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.download="data.csv",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(e)})):console.error("Error getting CSV data:",t.statusText)})).catch((t=>{console.error("Error getting CSV data:",t)}))}}},z=U,F=(0,p.Z)(z,R,Z,!1,null,null,null),I=F.exports,V={name:"ShowsTableEditor",components:{DownloadCSV:I,BEditableTable:O.Z,BSpinner:$.X},data(){return{image:"",currentPage:1,storeX:(0,L.E)(),appstore:(0,m.q)(),rowUpdate:{},synced:!0,fields:[{key:"edit",label:""},{key:"name",sortable:!0,label:"Name",type:"text",editable:!0},{key:"year",sortable:!0,label:"Year",type:"text",editable:!0,class:"year-col"},{key:"director",sortable:!0,label:"Director",editable:!0},{key:"duration",label:"Duration",editable:!0},{key:"tags",sortable:!0,label:"Tags",type:"text",editable:!0},{key:"ticket_price",sortable:!0,label:"Ticket Price",type:"text",editable:!0},{key:"format",sortable:!0,label:"Format",type:"text",editable:!0},{key:"language",sortable:!0,label:"Language",type:"text",editable:!0},{key:"image_url",label:"Poster",type:"url",editable:!0,class:"link-col"},{key:"image_sqr",label:"Thumbnail",type:"url",editable:!0,class:"link-col"},{key:"description",label:"Description",editable:!0,class:"link-col"}],loading:!1}},methods:{async update_records(){this.loading=!0,await this.storeX.getData(0),this.loading=!1,this.synced=!0},handleAdd(){const t="abc"+Date.now();this.rowUpdate={edit:!0,id:t,action:"add",addPosition:"end",data:{id:t,name:"",image_url:"",image_sqr:"",tags:"",ticket_price:"",format:"",language:"",year:"",director:"",description:"",duration:""}},this.synced=!1},async handleSubmit(t,e){this.rowUpdate={edit:!1,id:t.id,action:e?"update":"cancel"},this.synced=!e},handleEdit(t){this.rowUpdate={edit:!0,id:t.id}},async handleDelete(t){this.$bvModal.msgBoxConfirm("Please confirm that you want to delete this entry.",{title:"Please Confirm",bodyBgVariant:"dark",footerBgVariant:"dark",headerBgVariant:"dark",bodyTextVariant:"light",size:"sm",titleTag:"div",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!0,centered:!0}).then((async e=>{if(e){const e=await fetch(this.appstore.api+"/shows?"+new URLSearchParams({id:t.id}),{method:"DELETE",headers:this.appstore.getheader()}),a=await e.json();console.log(a),this.rowUpdate={id:t.id,action:"delete"}}})).catch((t=>{console.log(t)}))},async handleSave(){const t=await fetch(this.appstore.api+"/bulk/shows",{method:"POST",headers:this.appstore.getheader(),body:JSON.stringify(this.storeX.show_list)}),e=await t.status;this.update_records(),this.synced=!0,console.log(e)}},props:["displaymode","filter"],async created(){await this.update_records()}},G=V,H=(0,p.Z)(G,B,M,!1,null,null,null),J=H.exports,Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column"},[e("Transition",[0===t.displaymode?e("b-card",[e("b-editable-table",{staticClass:"editable-table table-hover",class:"dark"===t.appstore.app_theme?"bg-black":"bg-light-subtle",attrs:{busy:t.loading,"data-bs-theme":t.appstore.app_theme,editMode:"row",fields:t.fields,"current-page":t.currentPage,"per-page":"5",rowUpdate:t.rowUpdate,filter:t.filter,"head-variant":"dark"===t.appstore.app_theme?"dark":"secondary",borderless:"",disableDefaultEdit:"",hover:"","sort-icon-left":"",stacked:"sm"},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),e("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(edit)",fn:function(a){return[a.isEdit?e("div",{attrs:{"data-bs-theme":t.appstore.app_theme}},[e("b-button",{staticClass:"mx-2",attrs:{pill:""},on:{click:function(e){return t.handleSubmit(a,!1)}}},[e("font-awesome-icon",{attrs:{icon:["fas","xmark"]}})],1),e("b-button",{attrs:{pill:""},on:{click:function(e){return t.handleSubmit(a,!0)}}},[e("font-awesome-icon",{attrs:{icon:["fas","check"]}})],1)],1):e("div",[a.isEdit?t._e():e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2",attrs:{pill:"",title:"Edit Row"},on:{click:function(e){return t.handleEdit(a)}}},[e("font-awesome-icon",{attrs:{icon:["fas","pen-to-square"]}})],1),a.isEdit?t._e():e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{pill:"",title:"Delete Row"},on:{click:function(e){return t.handleDelete(a)}}},[e("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2 d-sm-none",attrs:{pill:"",title:"Reload"},on:{click:t.update_records}},[e("font-awesome-icon",{attrs:{icon:["fas","rotate-right"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-sm-none",attrs:{title:t.synced?"Synced with server":"Unsaved Changes. Save to continue",variant:t.synced?"secondary":"warning",pill:""},on:{click:function(e){return t.handleSave()}}},[e("font-awesome-icon",{attrs:{icon:["fas","floppy-disk"]}})],1)],1)]}}],null,!1,3592568986),model:{value:t.storeX.theatre_list,callback:function(e){t.$set(t.storeX,"theatre_list",e)},expression:"storeX.theatre_list"}}),e("b-button-toolbar",{attrs:{"data-bs-theme":t.appstore.app_theme,"key-nav":""}},[e("b-pagination",{staticClass:"my-0 bg-primary text-primary mx-3 mb-3",attrs:{id:"pagination","data-bs-theme":t.appstore.app_theme,"total-rows":t.storeX.$state.theatre_list.length,align:"fill","per-page":"5",size:"md"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),e("b-button-group",{staticClass:"mx-1 mb-3",attrs:{"key-nav":""}},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"me-2",attrs:{pill:"",title:"Add Row",variant:"secondary"},on:{click:function(e){return t.handleAdd()}}},[e("font-awesome-icon",{attrs:{icon:["fas","diagram-next"],rotation:"180"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"me-2",attrs:{pill:"",title:"Reload"},on:{click:t.update_records}},[e("font-awesome-icon",{attrs:{icon:["fas","rotate-right"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"me-2",attrs:{title:t.synced?"Synced with server":"Unsaved Changes. Save to continue",variant:t.synced?"secondary":"warning",pill:""},on:{click:function(e){return t.handleSave()}}},[e("font-awesome-icon",{attrs:{icon:["fas","floppy-disk"]}})],1),e("DownloadCSV",{attrs:{obj:"shows"}})],1)],1)],1):t._e()],1),e("Transition",[e("KeepAlive",[1===t.displaymode?e("div",{staticClass:"accordion w-100",attrs:{"data-bs-theme":t.appstore.app_theme,role:"tablist"}},t._l(t.storeX.theatre_list,(function(a,s){return e("b-card",{key:a.id,staticClass:"mb-1",attrs:{"no-body":""}},[e("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"acc"+s,expression:"'acc'+index"}],staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[e("div",{staticClass:"d-flex flex-row px-3"},[e("h1",{staticClass:"align-items-start my-3",staticStyle:{"min-width":"fit-content"}},[t._v(" "+t._s(a.name)+" ")]),e("b-row",{},[e("span",{staticClass:"d-none mx-3 d-md-block my-4"},[t._v(" "+t._s(a.place))])])],1)]),e("b-collapse",{attrs:{id:"acc"+s,accordion:"my-accordion",role:"tabpanel"}},[e("RunningEditor",{ref:"running_editor"+a.id,refInFor:!0,attrs:{t_id:a.id,filter:t.filter}})],1)],1)})),1):t._e()])],1),e("b-modal",{attrs:{id:"modal-run","data-bs-theme":t.appstore.app_theme,size:"xl",title:"Add"},scopedSlots:t._u([{key:"modal-footer",fn:function({cancel:a,hide:s}){return[e("b-button",{attrs:{size:"md",variant:"success"},on:{click:function(e){return t.createRunning(s,t.temp_run.theatre_id)}}},[t._v(" Add this show ")]),e("b-button",{attrs:{size:"md",variant:"danger"},on:{click:function(t){return a()}}},[t._v(" Cancel ")])]}}])},[e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-namet"}},[t._v("Show")])]),e("b-col",[e("b-form-select",{staticClass:"mb-3 input-field bg-primary",attrs:{"data-bs-theme":t.appstore.app_theme,size:"lg"},on:{change:t.update_variables},model:{value:t.selected_show,callback:function(e){t.selected_show=e},expression:"selected_show"}},[e("b-form-select-option",{attrs:{value:null}},[t._v("Please select a Show")]),t._l(t.storeX.show_list,(function(a){return e("b-form-select-option",{key:a.id,attrs:{value:a}},[t._v(t._s(a.name)+" ")])}))],2)],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-namet"}},[t._v("Theatre Name")])]),e("b-col",[e("b-form-select",{staticClass:"mb-3 input-field bg-primary",attrs:{"data-bs-theme":t.appstore.app_theme,size:"lg"},model:{value:t.temp_run.theatre_id,callback:function(e){t.$set(t.temp_run,"theatre_id",e)},expression:"temp_run.theatre_id"}},[e("b-form-select-option",{attrs:{value:null}},[t._v("Please select a Show")]),t._l(t.storeX.theatre_list,(function(a){return e("b-form-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name)+" ")])}))],2)],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-capacity"}},[t._v("Starting time")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-timepicker",{staticClass:"input-field",attrs:{locale:"en"},on:{input:t.updateSecondTime},model:{value:t.temp_run.start,callback:function(e){t.$set(t.temp_run,"start",e)},expression:"temp_run.start"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",[e("label",{attrs:{for:"input-capacity"}},[t._v("Ending time")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-timepicker",{staticClass:"input-field",attrs:{locale:"en"},model:{value:t.temp_run.end,callback:function(e){t.$set(t.temp_run,"end",e)},expression:"temp_run.end"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-capacity"}},[t._v("Language")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-select",{staticClass:"mb-3 input-field bg-primary",model:{value:t.temp_run.language,callback:function(e){t.$set(t.temp_run,"language",e)},expression:"temp_run.language"}},[e("b-form-select-option",{attrs:{value:null}},[t._v("Please select the Language")]),t._l(t.language_list,(function(a){return e("b-form-select-option",{key:a,attrs:{value:a}},[t._v(t._s(a))])}))],2)],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-capacity"}},[t._v("Ticket Price")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-input",{staticClass:"input-field",attrs:{id:"input-capacity",value:t.selected_show.ticket_price,type:"number"},model:{value:t.temp_run.ticket_price,callback:function(e){t.$set(t.temp_run,"ticket_price",e)},expression:"temp_run.ticket_price"}})],1)],1),e("b-row",{staticClass:"my-1"},[e("b-col",{attrs:{sm:"3"}},[e("label",{attrs:{for:"input-capacity"}},[t._v("Format")])]),e("b-col",{attrs:{sm:"9"}},[e("b-form-select",{staticClass:"mb-3 input-field bg-primary",model:{value:t.temp_run.format,callback:function(e){t.$set(t.temp_run,"format",e)},expression:"temp_run.format"}},[e("b-form-select-option",{attrs:{value:null,default:"",disabled:""}},[t._v("Please select the Format")]),t._l(t.format_list,(function(a){return e("b-form-select-option",{key:a,attrs:{value:a}},[t._v(t._s(a))])}))],2)],1)],1)],1)],1)},K=[],Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("b-editable-table",{staticClass:"editable-table table-hover",class:"dark"===t.appstore.app_theme?"bg-black":"bg-light-subtle",attrs:{busy:t.loading,"data-bs-theme":t.appstore.app_theme,editMode:"row",fields:t.fields,filter:t.filter,"head-variant":"dark"===t.appstore.app_theme?"dark":"secondary",rowUpdate:t.rowUpdate,borderless:"",hover:"",responsive:"","sort-icon-left":"",stacked:"sm"},scopedSlots:t._u([{key:"cell(ticket_price)",fn:function(a){return[e("span",[t._v("₹"+t._s(a.value))])]}},{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),e("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(edit)",fn:function(a){return[a.isEdit?e("div",{attrs:{"data-bs-theme":t.appstore.app_theme}},[e("b-button",{staticClass:"mx-2",attrs:{pill:""},on:{click:function(e){return t.handleSubmit(a,!1)}}},[e("font-awesome-icon",{attrs:{icon:["fas","xmark"]}})],1),e("b-button",{attrs:{pill:""},on:{click:function(e){return t.handleSubmit(a,!0)}}},[e("font-awesome-icon",{attrs:{icon:["fas","check"]}})],1)],1):e("div",[a.isEdit?t._e():e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2",attrs:{pill:"",title:"Edit Row"},on:{click:function(e){return t.handleEdit(a)}}},[e("font-awesome-icon",{attrs:{icon:["fas","pen-to-square"]}})],1),a.isEdit?t._e():e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{pill:"",title:"Delete Row"},on:{click:function(e){return t.handleDelete(a)}}},[e("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-2 d-sm-none",attrs:{pill:"",title:"Reload"},on:{click:t.update_records}},[e("font-awesome-icon",{attrs:{icon:["fas","rotate-right"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"d-sm-none",attrs:{title:t.synced?"Synced with server":"Unsaved Changes. Save to continue",variant:t.synced?"secondary":"warning",pill:""},on:{click:function(e){return t.handleSave()}}},[e("font-awesome-icon",{attrs:{icon:["fas","floppy-disk"]}})],1)],1)]}}]),model:{value:t.storeX.running_list[t.t_id],callback:function(e){t.$set(t.storeX.running_list,t.t_id,e)},expression:"storeX.running_list[t_id]"}}),e("div",[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:modal-run",arg:"modal-run"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mb-3 mx-1",attrs:{pill:"",title:"Add"}},[e("b-icon",{attrs:{icon:"plus-lg"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mb-3 mx-1",attrs:{pill:"",title:"Reload"},on:{click:t.update_records}},[e("font-awesome-icon",{attrs:{icon:["fas","rotate-right"]}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mb-3 mx-1",attrs:{title:t.synced?"Synced with server":"Unsaved Changes. Save to continue",variant:t.synced?"secondary":"warning",pill:""},on:{click:function(e){return t.handleSave()}}},[e("font-awesome-icon",{attrs:{icon:["fas","floppy-disk"]}})],1)],1)],1)},W=[],tt={name:"RunningEditor",components:{BEditableTable:O.Z},data:()=>({fields:[{key:"edit",label:""},{key:"show_name",label:"Show Name",type:"text",editable:!0,sortable:!0},{key:"start",label:"Start",type:"time",editable:!0,sortable:!0},{key:"end",label:"End",type:"time",editable:!0,sortable:!0},{key:"ticket_price",label:"Ticket Price",type:"text",editable:!0,sortable:!0},{key:"format",label:"Format",type:"text",editable:!0,sortable:!0},{key:"language",label:"Language",type:"text",editable:!0,sortable:!0}],loading:!1,rowUpdate:{},data:[],synced:!0,appstore:(0,m.q)(),storeX:(0,L.E)()}),methods:{async update_records(){this.loading=!0,await this.storeX.get_shows_of_theatre(),this.loading=!1},async handleSubmit(t,e){this.rowUpdate={edit:!1,id:t.id,action:e?"update":"cancel"},this.synced=!e},async handleSave(){const t=await fetch(this.appstore.api+"/bulk/running",{method:"POST",headers:this.appstore.getheader(),body:JSON.stringify(this.storeX.shows_for_theatre)}),e=await t.status;this.update_records(),this.synced=!0,console.log(e)},handleEdit(t){this.rowUpdate={edit:!0,id:t.id}},async handleDelete(t){this.$bvModal.msgBoxConfirm("Please confirm that you want to delete this entry.",{title:"Please Confirm",bodyBgVariant:"dark",footerBgVariant:"dark",headerBgVariant:"dark",bodyTextVariant:"light",size:"sm",titleTag:"div",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!0,centered:!0}).then((async e=>{if(e){const e=await fetch(this.appstore.api+"/running?"+new URLSearchParams({id:t.id}),{method:"DELETE",headers:this.appstore.getheader()}),a=await e.json();console.log(a),this.rowUpdate={id:t.id,action:"delete"}}})).catch((t=>{console.log(t)}))}},async mounted(){},props:["t_id","filter"]},et=tt,at=(0,p.Z)(et,Q,W,!1,null,null,null),st=at.exports,ot={name:"TheatresTableEditor",components:{DownloadCSV:I,RunningEditor:st,BEditableTable:O.Z,BSpinner:$.X},props:["displaymode","filter"],data(){return{selected_show:{language:"",format:"",duration:0},storeX:(0,L.E)(),temp_run:{},synced:!0,appstore:(0,m.q)(),rowUpdate:{},fields:[{key:"edit",label:""},{key:"name",sortable:!0,label:"Name",type:"text",editable:!0},{key:"place",sortable:!0,label:"Place",editable:!0},{key:"city",sortable:!0,label:"City",editable:!0}],loading:!1,state:{},dynamic_running_editor:null,currentPage:null}},computed:{language_list(){return this.selected_show.language.split(",").map((t=>t.trim()))},format_list(){return this.selected_show.format.split(",").map((t=>t.trim()))}},async created(){await this.update_records()},methods:{updateSecondTime(){if(this.temp_run.start){const t=new Date(this.temp_run.start),e=new Date(t.getTime()+144e4);console.log(e),this.temp_run.end=e.toTimeString().substring(0,8)}},async createRunning(t,e){console.log(this.temp_run);const a=await fetch(this.appstore.api+"/running",{method:"POST",headers:this.appstore.getheader(),body:JSON.stringify(this.temp_run)});await a.status;await this.$refs["running_editor"+e][0].update_records(),t()},async update_records(){this.loading=!0,await this.storeX.getData(1),await this.storeX.getData(2),this.loading=!1,this.synced=!0},handleAdd(){const t="abc"+Date.now();this.rowUpdate={edit:!0,id:t,action:"add",addPosition:"end",data:{id:t,name:"",place:"",city:""}},this.synced=!1},async handleSubmit(t,e){this.rowUpdate={edit:!1,id:t.id,action:e?"update":"cancel"},this.synced=!1},handleEdit(t){this.rowUpdate={edit:!0,id:t.id}},async handleDelete(t){this.$bvModal.msgBoxConfirm("Please confirm that you want to delete this entry.",{title:"Please Confirm",bodyBgVariant:"dark",footerBgVariant:"dark",headerBgVariant:"dark",bodyTextVariant:"light",size:"sm",titleTag:"div",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!0,centered:!0}).then((async e=>{if(e){const e=await fetch(this.appstore.api+"/theatre?"+new URLSearchParams({id:t.id}),{method:"DELETE",headers:this.appstore.getheader()}),a=await e.status;console.log(a),this.rowUpdate={id:t.id,action:"delete"}}})).catch((t=>{console.log(t)}))},async handleSave(){const t=await fetch(this.appstore.api+"/bulk/theatre",{method:"POST",headers:this.appstore.getheader(),body:JSON.stringify(this.storeX.theatre_list)}),e=await t.status;console.log(e)},update_variables(){this.temp_run.show_name=this.selected_show.name,this.temp_run.show_id=this.selected_show.id,this.synced=!0}}},it=ot,rt=(0,p.Z)(it,Y,K,!1,null,null,null),nt=rt.exports,lt={name:"DashboardView",components:{TheatresTableEditor:nt,ShowsTableEditor:J},data:()=>({storeX:(0,L.E)(),searching:!1,appstore:(0,m.q)(),displaymode:1,filter:"",flag_error:!1,separateTheatresToggle:!1,activeTab:0,value:"",fields:[{key:"name",label:"Name"},{key:"image_url",label:"Poster"},{key:"image_sqr",label:"Thumbnail"},{key:"tags",label:"Tags"},{key:"ticket_price",label:"Ticket Price"},{key:"format",label:"Format"},{key:"language",label:"Language"},{key:"edit",label:""}],items:[{age:40,name:"Dickerson",department:"Development",dateOfBirth:"1984-05-20"},{age:21,name:"Larsen",department:"Marketing",dateOfBirth:"1984-05-20"},{age:89,name:"Geneva",department:"HR",dateOfBirth:"1984-05-20"},{age:38,name:"Jami",department:"Accounting",dateOfBirth:"1984-05-20"}]})},ct=lt,dt=(0,p.Z)(ct,A,j,!1,null,"977e0e8a",null),pt=dt.exports;s["default"].use(o.ZP);const ut=[{path:"/",name:"home",component:X},{path:"/dashboard",name:"Dashboard",meta:{requiresAuth:!0},component:pt},{path:"/bookings",name:"booking",meta:{requiresAuth:!0},component:()=>a.e(425).then(a.bind(a,1425))},{path:"/login",name:"login",meta:{requiresAuth:!1},params:{next:""},component:()=>a.e(784).then(a.bind(a,8784))},{path:"/signup",name:"signup",meta:{requiresAuth:!1},component:()=>a.e(121).then(a.bind(a,121))},{path:"/show/:id",name:"show",meta:{requiresAuth:!0},component:()=>a.e(290).then(a.bind(a,290))},{path:"/theatre/:id",name:"theatre",meta:{requiresAuth:!0},component:()=>a.e(708).then(a.bind(a,7708))},{path:"/stats",name:"stats",meta:{requiresAuth:!0},component:()=>a.e(527).then(a.bind(a,8527))}],ht=new o.ZP({routes:ut,scrollBehavior(){return{top:-10}}});var mt=ht},1650:function(t,e,a){a.d(e,{M:function(){return i}});a(2062);var s=a(8659),o=a(3306);const i=(0,s.Q_)("BookingStore",{state:()=>({appstore:(0,o.q)(),count:123,selectedSeats:"",show:{},theatre:{},running:[],showModal1:!1,showModal2:!1,loading:!1}),getters:{double:t=>2*t.count},actions:{setValue(t,e){this.theatre=t,this.show=e,this.showModal1=!0},updateSeats(t){this.selectedSeats=t},async load_running(){this.loading=!0;try{this.loading=!0;const t=new URLSearchParams;t.append("id",this.theatre.id),t.append("sid",this.show.id);const e=await fetch(this.appstore.api+"/running?"+t.toString(),{method:"GET",headers:this.appstore.getheader()});200===e.status?(this.running=await e.json(),this.loading=!1):console.log(e.status,"Failed to load bulk running")}catch(t){console.log("Failed to load bulk running ",t)}}}})},6151:function(t,e,a){a.d(e,{E:function(){return i}});var s=a(8659),o=a(3306);const i=(0,s.Q_)("EditorStore",{state:()=>({show_list:[],theatre_list:null,running_list:[],selected_show:{},selected_theatre:{},editorMode:0,appstore:(0,o.q)(),shows_for_theatre:{},alert:{variant:"",content:"",click:"",show:!0}}),getters:{},actions:{set_alert(t,e,a){this.alert.variant=t,this.alert.content=e,this.alert.click=a,this.alert.show=!0},async put(t,e){console.log("put-data",e);const a=this.appstore;try{this.loading=!0;const s=await fetch(a.api+t,{method:"PUT",headers:a.getheader(),body:JSON.stringify(e)});if(200===s.status)return console.log("Pushed changes to server"),await s.json();console.log(s.status,"Failed to push update")}catch(s){console.log("Failed to push update ",s)}},async get_shows_of_theatre(){const t=this.appstore;try{this.loading=!0;const e=await fetch(t.api+"/bulk/running",{method:"GET",headers:t.getheader()});200===e.status?this.shows_for_theatre=await e.json():console.log(e.status,"Failed to load bulk running")}catch(e){console.log("Failed to load bulk running ",e)}},async getData(t){const e=this.appstore,a=1===t?"theatre":2===t?"running":"shows";try{this.loading=!0;const s=await fetch(e.api+"/bulk/"+a,{method:"GET",headers:e.getheader()});if(200!==s.status)throw console.log(s.status,"Failed to load bulk "+a),new TypeError("Token expired");{const e=await s.json();1===t?this.theatre_list=e:0===t?this.show_list=e:2===t&&(this.running_list=e)}}catch(s){console.log("Failed to load bulk"+a,s)}}}})},3306:function(t,e,a){a.d(e,{q:function(){return r}});a(7658);var s=a(8659),o=a(306),i=a(2751);const r=(0,s.Q_)("AppStore",{state:()=>({app_name:"TicketShow",app_theme:"light",server:"https://ticketshow-backend.onrender.com",api:"https://ticketshow-backend.onrender.com//api",next_page:"/",auth_token:"",city:"New Delhi",user:{role:"",email:"",username:"",name:"",profile_pic:""},csrf:"",is_logged_in:!1,server_error:!1,theatre_list:{theatre:[],order:[]},router:i.Z,review_id:!1,review_modal:{show:!1,show_id:-1,theatre_id:-1},signup_status:0}),getters:{},actions:{setCity(t){this.city=t,this.load_homepage()},async load_homepage(){console.log("loading homepage");try{const t=await fetch(this.api+"/homepage?city="+this.city,{method:"GET",headers:this.getheader()});if(200===t.status){let e=await t.json();this.theatre_list.theatre=e[0],this.theatre_list.order=e[1]}else this.server_error=!0}catch(t){this.server_error=!0}},async login_with_token(t,e){window.localStorage.setItem("Authentication-Token",t),this.auth_token=t,this.is_logged_in=!0,await this.get_user(),console.log(e),this.user.name=e.name,this.user.profile_pic=e.picture,window.localStorage.setItem("username",this.user.name),window.localStorage.setItem("profile_pic",this.user.profile_pic),console.log("Logged in Successfully")},toggle_theme(){"dark"===this.app_theme?this.app_theme="light":this.app_theme="dark",document.body.style.background="dark"===this.app_theme?"#000":"#fff",document.body.style.color="dark"===this.app_theme?"#fff":"#000"},reload_reviews(){this.review_id=!this.review_id},open_review_modal(t,e){this.review_modal.show=!0,e?this.review_modal.theatre_id=t:this.review_modal.show_id=t},hide_review_modal(){this.review_modal.show=!1},check_for_token(){try{this.auth_token=window.localStorage.getItem("Authentication-Token"),this.csrf=window.localStorage.getItem("csrf_token"),this.auth_token&&(this.is_logged_in=!0,console.log("Token Found"),this.get_user())}catch(t){console.log(t),i.Z.push({path:"login"})}},setValue(t,e){this.theatre=t,this.show=e},updateSeats(t){this.selectedSeats=t},async login(t,e,a){const s=this;await o.Z.post(s.server+"/login?&include_auth_token=true",{email:t,password:e,remember:!1},{headers:{"Content-Type":"application/json",accept:"application/json"}}).then((function(t){s.auth_token=t.data.response.user["authentication_token"],s.csrf=t.data.response["csrf_token"],s.is_logged_in=!0,s.get_user(),s.csrf&&s.auth_token&&a&&(window.localStorage.setItem("Authentication-Token",s.auth_token),window.localStorage.setItem("csrf_token",s.csrf),console.log("Logged in Successfully")),i.Z.push("/")})).catch((function(t){console.log(t)}))},async signup(t,e){const a=this;await o.Z.post(a.server+"/register",{email:t,password:e},{headers:{"Content-Type":"application/json",accept:"application/json"}}).then((function(s){a.signup_status=s.status,200===s.status&&(console.log("Signup Successful"),a.login(t,e,!1)),i.Z.push("/")})).catch((function(t){console.log(t)}))},async get_user(){try{const t=await fetch(this.api+"/user",{method:"GET",headers:this.getheader()}),e=await t.json();this.user.email=e.email,this.user.role=e.role,this.user.username=e.username,this.csrf=window.localStorage.getItem("csrf_token"),this.user.name=window.localStorage.getItem("username"),this.user.profile_pic=window.localStorage.getItem("profile_pic")}catch(t){console.log(t),this.server_error=!0}},async logout(){const t=this;await o.Z.post(this.server+"/logout").then((e=>{200===e.status&&(window.localStorage.removeItem("Authentication-Token"),window.localStorage.removeItem("csrf_token"),window.localStorage.removeItem("profile_pic"),window.localStorage.removeItem("username"),t.auth_token="",t.csrf="",t.is_logged_in=!1,t.user={},this.user.role="","home"!==i.Z.currentRoute.name&&i.Z.push("/"),console.log("logout Successful"))}))},getheader(){if(this.is_logged_in&&this.auth_token)return{"Content-Type":"application/json","Authentication-Token":this.auth_token};this.next_page=i.Z.currentRoute.path,i.Z.push({path:"login"})}}})}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,o,i){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],i=t[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(n=!1,i<r&&(r=i));if(n){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,o,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{121:"7cbad111",290:"3cf6b380",425:"6302e2a1",527:"9cd025eb",708:"7acc8bcd",784:"e0dae391"}[t]+".js"}}(),function(){a.miniCssF=function(t){return"css/"+t+"."+{121:"d61ccda2",425:"017622fc",527:"cdfe3f12",784:"d8fbe2a6"}[t]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="ticketshow-vue:";a.l=function(s,o,i,r){if(t[s])t[s].push(o);else{var n,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var p=c[d];if(p.getAttribute("src")==s||p.getAttribute("data-webpack")==e+i){n=p;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",e+i),n.src=s),t[s]=[o];var u=function(e,a){n.onerror=n.onload=null,clearTimeout(h);var o=t[s];if(delete t[s],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach((function(t){return t(a)})),e)return e(a)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var t=function(t,e,a,s,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var r=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=n,i.parentNode&&i.parentNode.removeChild(i),o(l)}};return i.onerror=i.onload=r,i.href=e,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},e=function(t,e){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var o=a[s],i=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===t||i===e))return o}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){o=r[s],i=o.getAttribute("data-href");if(i===t||i===e)return o}},s=function(s){return new Promise((function(o,i){var r=a.miniCssF(s),n=a.p+r;if(e(r,n))return o();t(s,n,null,o,i)}))},o={143:0};a.f.miniCss=function(t,e){var a={121:1,425:1,527:1,784:1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=s(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}}(),function(){var t={143:0};a.f.j=function(e,s){var o=a.o(t,e)?t[e]:void 0;if(0!==o)if(o)s.push(o[2]);else{var i=new Promise((function(a,s){o=t[e]=[a,s]}));s.push(o[2]=i);var r=a.p+a.u(e),n=new Error,l=function(s){if(a.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var i=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;n.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",n.name="ChunkLoadError",n.type=i,n.request=r,o[1](n)}};a.l(r,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,i,r=s[0],n=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(l)var d=l(a)}for(e&&e(s);c<r.length;c++)i=r[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},s=self["webpackChunkticketshow_vue"]=self["webpackChunkticketshow_vue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7963)}));s=a.O(s)})();
//# sourceMappingURL=app.b14d460f.js.map